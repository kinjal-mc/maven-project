pipeline {
	agent any

	tools {
		maven 'localMaven'
	}

	stages {
		stage('Build') {
			parallel {
				stage('package') {
					steps {
						sh 'mvn clean package'
					}
					post {
						success {
							echo 'Archiving Artifacts'
                    		archiveArtifacts artifacts: '**/target/*.war'
                    	}
					}
				}
				stage('check-style') {
					steps {
						sh 'mvn checkstyle:checkstyle'
					}
					post {
						success {
							echo 'checkstyle succeeded !!'
							checkstyle canComputeNew: false, defaultEncoding: '', healthy: '', pattern: '', unHealthy: ''
						}
					}
				}
			}
		}
	}
}